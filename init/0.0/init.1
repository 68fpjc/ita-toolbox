


LOGIN(1)       Human68k ITA TOOLBOX User's Manual        LOGIN(1)



名称
     login - Human68k へのログイン

形式
     login [ -p ] [ name [ env-var ... ] ]

解説
     login コマンドを使う目的は 2つあります．その 1つは，Human68k
     を利用する環境をユーザ毎に，あるいは作業内容毎に振り分けるこ
     とです．パスワード・ファイルによって，ユーザ毎に環境を振り分
     け，また，非ユーザの利用を排除します．login コマンドは，ユー
     ザがシステムの使用を開始する際に使われる他，他のユーザへ一時
     的に変更する際にも使うことができます．また，特定の処理をユー
     ザの環境に依存せずに確実に実行するためにも使われます．

     login コマンドを使う目的のもう 1つは，fish(1) をログイン・シェ
     ルとして起動することです．fish(1) は login(1) から起動される
     と自動的にログイン・シェルとなります．システム・ファイル
     CONFIG.SYS(5) に SHELL=A:\bin\fish.x のように記述したり，
     Human68k のプロンプト # に対して A:\bin\fish のように入力し
     て Human68k から直接起動することによっても fish(1) をログイ
     ン・シェルとして動作させることができますが，この場合，
     fish(1) を終了すると Human68k のプロンプト # に戻ってしまう
     ため，不便です．login コマンドをシステムの根元に置けば，この
     不便さは解消されます．これは一般的には，CONFIG.SYS に

          SHELL=A:/bin/login.x

     のように記述しておくことで実現できます．（本来は init.x が
     この役割を担うべきですが，init.x はまだ提供されていません）

     引数 name を指定すると，name をログイン名として受理します．
     引数 name が指定されていなければ，login は 端末に login: プ
     ロンプトを表示してユーザのログイン名を尋ねてきます．入力の終
     わりは改行（CR または LF）です．入力の途中で ^C または ^U を
     タイプすると入力行はキャンセルされ，再び最初から入力を促され
     ます．^D をタイプすると login は終了して親プロセスに戻ります
     （ただし login に親プロセスがない場合には終了せず，再びユー
     ザのログイン名を尋ねます）．これら以外の入力キャラクタはすべ
     てログイン名の一部として入力されます．

     ログイン名の前後の空白は削除されます．

     次に，必要な場合には端末に Password: プロンプトを表示してパ
     スワードを尋ねてきます．パスワードの入力中は，可能であればエ
     コー・バックがオフになり，パスワードは端末には表われません．
     パスワードの入力中は，改行（CR または LF）以外のすべての入力
     キャラクタが文字として入力されます．

     ログインに成功すると，login はファイル $SYSROOT/etc/motd の
     内容を表示します．ただしログイン・ユーザのホーム・ディレクト
     リにファイル .hushlogin または %hushlogin がある場合には，こ
     の表示は行いません．（ここで，$SYSROOT は環境変数 SYSROOT の
     値を意味します）

     login はパスワードファイル内の指定にしたがってログイン・ユー
     ザのホーム・ディレクトリをカレント・ディレクトリとし，パスワー
     ドファイル内の指定にしたがってシェル・プログラムを起動します．

     ユーザの（ログイン・シェルに渡される）環境変数は，以下のよう
     に初期設定されています．

          LOGNAME=ユーザのログイン名（ユーザ名）
          USER=ユーザ名
          HOME=ユーザのログイン（ホーム）・ディレクトリ
          SHELL=シェル・プログラムのパス名
          SYSROOT=システムのルート・ディレクトリ

     SYSROOT は，login 自身の環境そのものです．login が環境変数
     SYSROOT を持っていなければユーザの環境でも未定義となります．

     他の環境変数は破棄されますが，‘-p’オプションを指定すれば，
     他の環境変数も保存されます．

     引数 env-var ... はユーザの環境に追加されます．引数は bar ま
     たは foo=bar の形式をとることができます．‘=’が含まれていな
     い引数 bar は次のようにユーザの環境に定義されます．

          Ln=bar

     ここで，n は 0 から始まる10進整数で，新しい変数をセットする
     度にインクリメントします．

     ‘=’を含む引数 foo=bar は，そのままユーザの環境にセットされ
     ます．

     ユーザのシェルに渡される環境領域の大きさはすべての変数がちょ
     うど収まる大きさに切り詰められています．

     ログイン・シェルが終了すると同時に login も終了します．ただ
     し login に親プロセスがない場合（CONFIG.SYS の SHELL= によっ
     て login を起動した場合など）には再び login プログラムが動作
     し，ユーザのログイン名を尋ねることから始まる一連のセッション
     が繰り返されます．

     通常のファイル $SYSROOT/etc/nologin が存在していれば，login
     はその内容を表示し，何もせずに終了します．

環境変数
     SYSROOT        システムのルート・ディレクトリ

関連ファイル
     $SYSROOT/etc/passwd        パスワードファイル
     $SYSROOT/etc/nologin       ログインの禁止
     $SYSROOT/etc/motd          ログイン・メッセージ
     $HOME/.hushlogin           ログイン・メッセージの抑止
     $HOME/%hushlogin           ログイン・メッセージの抑止

関連事項
     fish(1), getty(8), init(8), motd(5), passwd(5)

制作・著作
     Copyright(C)1991 by 板垣 史彦 (Itagaki Fumihiko)

バグ
     パスワードはまだ暗号化されていません．近い将来新しい login.x
     が passwd.x コマンドと共に提供され，そのときにはパスワードは
     暗号化されることでしょう．その暗号はごく簡単なものであるため
     赤子の手をひねるように，いとも簡単に見破られることでしょうが，
     見破ってはいけません．:-)

     陳腐化パスワードの判断は行わず，passwd.x も起動しません．

     login に親プロセスがない場合の login の動作は，init.x や
     getty.x が提供されるまでの暫定的な処置です．



0.4                 Last change: 26 Jan 1992     Itagaki Fumihiko



